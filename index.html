<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  font-family:Arial,Roboto,sans-serif;
  margin:0;
  background:#f8f9fa;
}
header{
  background:#1a1a2e;
  color:#fff;
  padding:15px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:10;
}
header h1{margin:0;font-size:20px;}
.top-buttons button{
  background:#4b49ac;
  border:none;
  color:#fff;
  padding:8px 12px;
  border-radius:5px;
  margin-left:10px;
  cursor:pointer;
}
.container{padding:20px;}
.event-banner{
  background:#fffae6;
  color:#8a6d3b;
  padding:10px 15px;
  border-radius:8px;
  margin-bottom:20px;
  font-weight:500;
}
.card{background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,.1);margin-bottom:20px;}
.table-container{max-height:400px;overflow:auto;}
table{width:100%;border-collapse:collapse;}
th,td{padding:10px;font-size:14px;}
th{background:#1a1a2e;color:#fff;position:sticky;top:0;}
tr:nth-child(even){background:#f1f1f1;}
.price-up{color:green;font-weight:bold;}
.price-down{color:red;font-weight:bold;}
</style>
</head>
<body>

<header>
  <h1>Dashboard</h1>
  <div class="top-buttons">
    <button onclick="location.href='login.html?form=login'">Login</button>
    <button onclick="location.href='login.html?form=signup'">Sign Up</button>
  </div>
</header>

<div class="container">
  <!-- Ø¨Ø®Ø´ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø®Ø§Øµ -->
  <div class="event-banner">
    ğŸ‰ Special Event: Earn bonus points on selected coins this week!
  </div>

  <div class="card">
    <h2>Top 100 Coins</h2>
    <div class="table-container">
      <table id="dashboardTable">
        <thead>
          <tr>
            <th>Coin</th>
            <th>Price</th>
            <th>24h</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Ø§ØªØµØ§Ù„ Supabase -->
<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

// ğŸŸ¦ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Supabase
const SUPABASE_URL = "https://iecnioogmafgxwarmkxz.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllY25pb29nbWFmZ3h3YXJta3h6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3OTYwNDgsImV4cCI6MjA4MzM3MjA0OH0.3zkHQpwdYUVdf6_GkPfkLRu7xgWMaUHNuFmYMBgBsJA";

window.supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
</script>

<script>
// Fetch Top 100 Coins
fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1')
.then(r=>r.json())
.then(data=>{
  const dBody=document.querySelector('#dashboardTable tbody');
  dBody.innerHTML='';
  data.forEach(c=>{
    const symbol=c.symbol.toUpperCase();
    dBody.innerHTML+=`
      <tr>
        <td>${symbol}</td>
        <td>$${c.current_price.toLocaleString()}</td>
        <td class="${c.price_change_percentage_24h>=0?'price-up':'price-down'}">${c.price_change_percentage_24h.toFixed(2)}%</td>
      </tr>`;
  });
});

// Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Supabase (Ø®ÙˆØ§Ù†Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±Ø§Ù†)
async function getUsers() {
  const { data, error } = await supabase.from('users').select('*');
  if(error) console.log('Supabase Error:', error);
  else console.log('Users:', data);
}
getUsers();
</script>

</body>
</html>
