<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Withdraw | Novabit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="coins.js"></script>
<script src="wallets.js"></script>

<style>
body{
  margin:0;
  font-family:Roboto,Arial,sans-serif;
  background:#f5f6fa;
}
header{
  background:#1a1a2e;
  color:#fff;
  padding:15px;
  text-align:center;
  font-size:18px;
  position:sticky;
  top:0;
}
.container{
  max-width:600px;
  margin:20px auto;
  padding:0 20px;
}
.card{
  background:#fff;
  padding:25px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}
label{
  font-weight:500;
  margin-top:15px;
  display:block;
}
select,input{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:15px;
}
button{
  width:100%;
  margin-top:20px;
  padding:14px;
  background:#4b49ac;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:16px;
  font-weight:500;
  cursor:pointer;
}
button:hover{background:#3a3690}
.notice{
  background:#fff3cd;
  padding:12px;
  border-radius:8px;
  margin-top:15px;
  font-size:14px;
  color:#856404;
}
.success{
  background:#d4edda;
  color:#155724;
  padding:12px;
  border-radius:8px;
  margin-top:15px;
  display:none;
}
</style>
</head>
<body>

<header>Withdraw</header>

<div class="container">
  <div class="card">

    <label>Select Coin</label>
    <select id="coinSelect"></select>

    <label>Network</label>
    <select id="networkSelect"></select>

    <label>Recipient Address</label>
    <input type="text" id="toAddress" placeholder="Enter destination address">

    <label>Amount</label>
    <input type="number" id="amount" placeholder="0.00">

    <button onclick="submitWithdraw()">Submit Withdraw</button>

    <div class="notice">
      ⚠️ Withdrawals are processed manually.<br>
      Please ensure the address and network are correct.
    </div>

    <div class="success" id="successMsg">
      ✅ Withdraw request submitted successfully.<br>
      Status: Pending manual review.
    </div>

  </div>
</div>

<script>
const coinSelect = document.getElementById('coinSelect');
const networkSelect = document.getElementById('networkSelect');
const successMsg = document.getElementById('successMsg');

/* ---------- Load coins ---------- */
COINS.forEach(c=>{
  if(WALLET_ADDRESSES[c.symbol]){
    let opt = document.createElement('option');
    opt.value = c.symbol;
    opt.innerText = c.symbol + " - " + c.name;
    coinSelect.appendChild(opt);
  }
});

/* ---------- Load networks ---------- */
function loadNetworks(){
  networkSelect.innerHTML = "";
  const wallet = WALLET_ADDRESSES[coinSelect.value];
  wallet.networks.forEach(n=>{
    let opt = document.createElement('option');
    opt.value = n.network;
    opt.innerText = n.network;
    networkSelect.appendChild(opt);
  });
}
coinSelect.addEventListener('change', loadNetworks);
loadNetworks();

/* ---------- Submit Withdraw ---------- */
function submitWithdraw(){
  const coin = coinSelect.value;
  const network = networkSelect.value;
  const address = document.getElementById('toAddress').value;
  const amount = document.getElementById('amount').value;

  if(!address || !amount){
    alert("Please fill all fields");
    return;
  }

  console.log("WITHDRAW REQUEST", {
    coin, network, address, amount
  });

  successMsg.style.display = "block";
}
</script>

</body>
</html>
